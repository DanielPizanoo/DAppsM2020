(window.webpackJsonp=window.webpackJsonp||[]).push([["infogram-charts/charts-pictorial_bar"],{vvQW:function(t,e,a){"use strict";a.r(e),a.d(e,"PictorialBar",(function(){return B}));var r=a("LvDl"),i=a.n(r),n=a("vBe5"),o=a("ziQ1"),l=a("+3eq"),s=a("x5YE"),c=a("VLlq"),h=a("v3rV"),u=a("ZHFg"),p=a("x+1q"),f=a("3y/1"),g=a("3UmV"),d=a("2YLo"),v=a("XKI8"),b=a("pYxU"),y=a("PQZg");function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function w(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function O(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function j(t,e){return!e||"object"!==m(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function x(t,e,a){return(x="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,a){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=k(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(a):i.value}})(t,e,a||t)}function k(t){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function S(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function D(t,e,a){return e&&S(t.prototype,e),a&&S(t,a),t}function P(t,e){return(P=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var B=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),j(this,k(e).call(this,t,"div"))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&P(t,e)}(e,t),D(e,null,[{key:"getClassName",value:function(){return"PictorialBar"}}]),D(e,[{key:"render",value:function(){var t=this;this.detectDimensions();var e=this.options,a=this.root,r=new d.Renderer({instance:this}),i=this.getSheetData(),f=Object(p.default)(i),g=this.runtime={width:e.width,height:e.height,inanimate:Object(h.inanimated)(e),sheet:i,formatter:f},v={top:10,right:10,bottom:10,left:10,pictorial:1},y=this.prepareSheetData(i),m=y.data;this.sizeMultiplier=1,a.select(".igc-pictorial-bar-visual").remove();var w=g.svg=a.append("svg").attr("class","igc-pictorial-bar-visual");this.groupTagName="g",Object(c.default)(this,{width:e.width}),Object(b.DownloadButton)(this,e.style.legend);var O=Object(s.legendHelper)({instance:this});if(O&&O.chartType("pictorial-grid"),!this.sheetsNotFound()){var j=!!e.series.showText?m[0].text:"",x=this.createAnimationCounter(2),k=e.style.graph.item.value,S=g.width-v.left-v.right,D=g.height-v.top-v.bottom,P=g.height,B=this.setupBarText(j,y.colors,k),C={width:Math.round(S/2),height:Math.round(D)},T=parseInt(k["font-size"],10),M=this.drawBarText(B,C,v,T,!1,y.textLink),A=C.height-M.height;A>=0?B.styles({top:v.top+A/2+"px"}):(D+=Math.abs(A),P+=Math.abs(A)),M.width>0&&(S-=M.width+10);var E=i.categories.shapes;E.length||(E=this.defaults().shapes.map((function(t){return t.title}))),E=Object(u.availableShapesMetrics)(e.shapes,w)(E);var L=Object.values(E).reduce((function(t,e){return t.width=Math.max(t.width,e.bbox.width+v.pictorial),t.height=Math.max(t.height,e.bbox.height),t}),{width:0,height:0}),I=this.getValueSum(m),_=S/I/L.width,R=D/L.height,z=Math.min(_,R);E=this.initShapesScaled(E,z),L=Object.values(E).reduce((function(t,e){return t.width=Math.max(t.width,e.bbox.width+v.pictorial),t.height=Math.max(t.height,e.bbox.height),t}),{width:0,height:0});var N={cols:Math.min(I,Math.floor(S/L.width)),rows:1,cellMetrics:L};N.cellCount=N.rows*N.cols,N.colPosition=Object(o.scaleBand)().domain(Object(n.range)(0,N.cols)).range([0,S]).padding(0),N.rowPosition=Object(o.scaleBand)().domain(Object(n.range)(0,N.rows)).range([(D-L.height)/2,D]).padding(0),N.realNumbers=!1;var Q=y.data=this.getShapeDataScattered(i,m,N,E,I);y.overlayData=this.getShapeGroupOverlayPaths(m,Q,N),this.prepareShapes(E,z);var V={igc:{x:v.left,y:v.top}};this.containerSetup(),w.attr("width",g.width).attr("height",P);var H=w.select(".igc");r.add((function(){w.datum(t).transition().ease(l[e.animation.ease]).duration(e.animation.duration).on("start",(function(){t.events.call("startAnimation")})).on("end",(function(){x()})),H.attr("transform","translate(".concat(V.igc.x,", ").concat(V.igc.y,")"))})),r.addGraph([{graphs:[y],transitionDuration:e.animation.duration,legend:O,originalScale:z,animationEnd:x}]),r.start()}}},{key:"prepareSheetData",value:function(t){var e=t.categories.shapes,a=this.getSheetColors(),r=t.series[0],i="".concat(r.rawData[0]),n=-1!==Object(f.replaceBlank)(i).indexOf("%"),o={value:Object(f.replaceBlank)(Math.abs(r.data[0]),0),valueLabel:Object(f.replaceBlank)(r.rawData[3]),category:Object(f.replaceBlank)(r.rawData[2]),text:Object(f.replaceBlank)(r.rawData[3]),shape:e[0],categoryIdx:0,link:r.links?r.links[0]:null},l={value:Object(f.replaceBlank)(Math.abs(r.data[1]),0),valueLabel:Object(f.replaceBlank)(r.rawData[3]),category:Object(f.replaceBlank)(""),shape:e[0],categoryIdx:1,link:r.links?r.links[1]:null};return n?(o.value=l.value*(o.value/100),l.value-=o.value):o.value>l.value?l.value=0:(o.value=l.value-(l.value-o.value),l.value-=o.value),Object(s.createLegendData)(this)({color:a[0],title:o.category,groupId:0}),o.value===l.value&&0===o.value&&(l.value=1),{type:r.type,data:[o,l],colors:a,textLink:r.links?r.links[3]:null}}},{key:"getSheetColors",value:function(){var t=this.runtime,e=i.a.get(t,"sheet"),a=i.a.get(e,"categories"),r=i.a.get(e,"series[0].index",0),n=a.inactiveColor,o=a.inactiveColorAlpha;return void 0!==o&&(n=y.Colors.rgbStrToRgbaStr(n,o)),[i.a.get(a,"colors[".concat(r,"]")),n]}},{key:"initShapesScaled",value:function(t,e){var a=this.runtime.svg;return Object.keys(t).reduce((function(r,i){var n=t[i].shape,o=Object(f.measurePath)(n,a,e);return r[i]={shape:n,bbox:o},r}),{})}},{key:"prepareShapes",value:function(t,e){var a=this.runtime.svg;a.selectAll("defs").data([0]).enter().append("defs");var r=a.select("defs");Object.keys(t).forEach((function(a){var i=t[a].shape,n="igc-cp-"+a+this.chartId;r.selectAll("#"+n).data([0]).enter().append("clipPath").attr("id",n).selectAll("path").data([0]).enter().append("path").attr("d",i),r.selectAll("#"+n).attr("transform","scale("+e+")")}),this)}},{key:"graphInstanceSetup",value:function(t,e,a,r,i){var n=e.data.length,o=this.runtime.formatter,l=Object(h.removeDelay)(this,(function(t,e){return e/n*500}));t.data(e.data).overlayData(e.overlayData).colors(e.colors).groupId(i).highlightFirstOnly(!0).tooltip(Object(v.createStyledTooltip)(this)).tooltipText((function(t){return t.category})).tooltipValue((function(t){return o.tooltip.x.format(t.valueLabel)})).transitionDelay(l).transitionDuration(r.transitionDuration),t.dispatch().on("animationEnd",r.animationEnd)}},{key:"setupBarText",value:function(t,e,a){var r=this.root,n=this.options.style.graph.item.value;r.select(".igc-pictorial-bar-text-container").remove();var o=r.insert("div",".igc-pictorial-bar-visual").attr("class",".igc-pictorial-bar-text-container".slice(1));o.styles({width:"".concat(this.runtime.width,"px")});var l=i.a.pick(a,["font-family","font-weight","font-style"]);return o.append("div").attr("class","igc-pictorial-bar-text").text(t).styles(function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?w(Object(a),!0).forEach((function(e){O(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({position:"absolute",color:n.color||e[0]},l))}},{key:"drawBarText",value:function(t,e,a,r,i,n){var o=this.interaction;t.styles({"font-size":"".concat(r,"px"),top:"".concat(a.top,"px"),right:"".concat(a.right,"px")}),t.style("width",null),i&&t.style("width","".concat(e.width,"px"));var l={width:t.node().offsetWidth,height:t.node().offsetHeight};return l.width>e.width?this.drawBarText(t,e,a,r,!0,n):l.height>e.height&&r>11?(r--,this.drawBarText(t,e,a,r,!1,n)):(t.classed("igc-chart-link",!!n).on("click",(function(){Object(f.openUrl)(n,o)})),l)}},{key:"containerSetup",value:function(){var t=this.runtime.svg;t.selectAll("defs").data([0]).enter().append("defs");var e=t.selectAll(".igc").data([0]);e.merge(e.enter().append("g").attr("class","igc"))}},{key:"defaults",value:function(){var t={};return i.a.merge(t,x(k(e.prototype),"defaults",this).call(this),{style:{graph:{item:{value:{"font-size":"60px"}}}}}),i.a.unset(t,"style.graph.item.value.color"),t}},{key:"emptySheetData",value:function(){return i.a.merge({},x(k(e.prototype),"emptySheetData",this).call(this),{categories:{inactiveColor:"#959595"}})}},{key:"applySheetOptions",value:function(t){function e(e){return t[e]||t[0]}t&&this.options.sheets.forEach((function(t,a){var r=e(a+1);r.categories&&i.a.merge(t.categories,r.categories),t.series.forEach((function(t){"bar"===t.type&&r.bar&&i.a.merge(t,r.bar)})),r.legend&&i.a.merge(t.legend,r.legend),t.iconSizeMultiplier=1}))}}]),e}(g.PictorialGrid)},"w+Xm":function(t,e,a){"use strict";a.r(e);var r=a("LvDl"),i=a.n(r),n=a("vvQW"),o=a("l7Rd"),l=a("6jAQ"),s=Object.create(l.default);e.default=s,function(){this.instanceClass=n.PictorialBar,this.defaultHeight=100,this.setupChartOptions=function(){l.default.setupChartOptions.call(this);var t=this.custom;this.chartOptions.series.showText=!i.a.has(t,"showText")||t.showText},this.setupChartOptionsStyle=function(){l.default.setupChartOptionsStyle.call(this);var t=i.a.merge({},i.a.get(this.charts,"pictorialBar.style",{})),e=i.a.get(this,"custom.labels.graph.item.value.font-family"),a=i.a.get(t,"graph.item.value.font-family");e?i.a.unset(t,"graph.item.value.font-family"):a&&i.a.set(t,"graph.item.value.font-family",a),i.a.merge(this.chartOptions.style,t)},this.setupChartSheetOptionsItem=function(t){var e=i.a.get(this,"charts.pictorialBar.colors.background"),a=t.inactive||e||"#959595",r={categories:{colors:i.a.merge([],this.themeColors,t.colors||this.colors),inactiveColor:a,inactiveColorAlpha:i.a.get(t,"inactiveAlpha",1)}};this.setupLegend(r,t);var n=t.path;return o.addShapesToCharts.call(this,n),r.categories.shapes=[Object(o.cleanShapeName)(n)],r}}.call(s)}}]);